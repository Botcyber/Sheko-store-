<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>إدارة الصفحة</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
<style>
body {font-family: Arial; background:#111; color:white; padding:20px; text-align:center;}
input, button {padding:10px; margin:10px; border-radius:6px; border:none;}
button {background:red; color:white; cursor:pointer;}
.links-box {margin-top:25px;}
</style>
</head>
<body>

<h2>لوحة التحكم – رفع صورة + إضافة روابط</h2>

<!-- رفع الصورة -->
<input type="file" id="mainImage"><br>
<button onclick="uploadImage()">رفع الصورة</button>

<hr>

<!-- إضافة الروابط -->
<h3>إضافة رابط</h3>
<input id="linkText" placeholder="اسم الرابط">
<input id="linkURL" placeholder="رابط URL">
<button onclick="addLink()">إضافة الرابط</button>

<div class="links-box">
<h3>الروابط الحالية:</h3>
<div id="linksList"></div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAYcZ2_RjaI4fjP14QlqbUbL3rWvPPWnas",
  authDomain: "sheko-store.firebaseapp.com",
  databaseURL: "https://sheko-store-default-rtdb.firebaseio.com",
  projectId: "sheko-store",
  storageBucket: "sheko-store.appspot.com",
  messagingSenderId: "113892775847",
  appId: "1:113892775847:web:2aa4c11c3f5dd1d15f0882"
};
firebase.initializeApp(firebaseConfig);

const db = firebase.database();
const storage = firebase.storage();

// رفع الصورة
function uploadImage(){
  const file = document.getElementById("mainImage").files[0];
  if(!file){ alert("اختر صورة أولًا"); return; }

  const ref = storage.ref("mainImage.jpg");
  ref.put(file).then(()=>{
    ref.getDownloadURL().then(url=>{
      db.ref("mainPage/image").set(url);
      alert("تم رفع الصورة بنجاح ✔");
    });
  });
}

// إضافة رابط
function addLink(){
  const text = document.getElementById("linkText").value.trim();
  const url = document.getElementById("linkURL").value.trim();

  if(!text || !url){ alert("اكتب اسم الرابط والرابط"); return; }

  db.ref("mainPage/links").push({
    name: text,
    url: url
  });

  document.getElementById("linkText").value="";
  document.getElementById("linkURL").value="";
  alert("تم إضافة الرابط ✔");
}

// عرض الروابط داخل صفحة الأدمن
db.ref("mainPage/links").on("value", snapshot=>{
  const box = document.getElementById("linksList");
  box.innerHTML="";

  snapshot.forEach(item=>{
    const val = item.val();
    const div = document.createElement("div");
    div.innerHTML = `• ${val.name} (${val.url})`;
    box.appendChild(div);
  });
});
</script>
</body>
</html>
