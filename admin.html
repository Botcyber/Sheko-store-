<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لوحة تحكم الأدمن - Sheko Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Cairo', sans-serif; background: #f1f1f1; margin: 0; padding: 0; }
    header { background: #222; color: white; padding: 15px; text-align: center; font-size: 20px; }
    .container { max-width: 1000px; margin: auto; padding: 20px; background: white; border-radius: 12px; margin-top: 20px; }
    h2 { color: #222; margin-top: 30px; }
    label, input, select, button { display: block; width: 100%; margin: 10px 0; padding: 10px; font-size: 16px; border-radius: 5px; }
    input, select { border: 1px solid #ccc; }
    button { background: #222; color: white; cursor: pointer; border: none; }
    button:hover { background: #444; }
    .section { border-top: 1px solid #ccc; padding-top: 20px; margin-top: 20px; }
    .entry { background: #f9f9f9; padding: 10px; margin: 5px 0; border-radius: 5px; font-size: 14px; }
  </style>
</head>
<body>
  <header>لوحة تحكم الأدمن - Sheko Store</header>
  <div class="container">
    <h2>إضافة/تحديث مستخدم</h2>
    <input id="uid" placeholder="UID المستخدم">
    <input id="email" placeholder="البريد الإلكتروني">
    <input id="balance" placeholder="الرصيد">
    <input id="points" placeholder="النقاط">
    <button onclick="saveUser()">حفظ المستخدم</button><div class="section">
  <h2>طلبات المستخدمين</h2>
  <div id="orders"></div>
</div>

<div class="section">
  <h2>تحويلات الأموال</h2>
  <div id="payments"></div>
</div>

<div class="section">
  <h2>المستخدمون الجدد</h2>
  <div id="newUsers"></div>
</div>

  </div><script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script><script>
  const firebaseConfig = {
    apiKey: "AIzaSyAYcZ2_RjaI4fjP14QlqbUbL3rWvPPWnas",
    authDomain: "sheko-store.firebaseapp.com",
    databaseURL: "https://sheko-store-default-rtdb.firebaseio.com",
    projectId: "sheko-store",
    storageBucket: "sheko-store.appspot.com",
    messagingSenderId: "113892775847",
    appId: "1:113892775847:web:2aa4c11c3f5dd1d15f0882"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function saveUser() {
    const uid = document.getElementById("uid").value.trim();
    const email = document.getElementById("email").value.trim();
    const balance = parseFloat(document.getElementById("balance").value);
    const points = parseFloat(document.getElementById("points").value);

    if (!uid || !email) return alert("الرجاء إدخال UID والبريد الإلكتروني");

    db.ref("users/" + uid).set({ email, balance, points })
      .then(() => alert("تم حفظ المستخدم"))
      .catch(err => alert("خطأ: " + err.message));
  }

  function loadData() {
    db.ref("orders").on("value", snapshot => {
      const ordersDiv = document.getElementById("orders");
      ordersDiv.innerHTML = "";
      snapshot.forEach(order => {
        const data = order.val();
        ordersDiv.innerHTML += `<div class="entry">طلب من ${data.account} - ${data.service} - ${data.package} (${data.status})</div>`;
      });
    });

    db.ref("payments").on("value", snapshot => {
      const paymentsDiv = document.getElementById("payments");
      paymentsDiv.innerHTML = "";
      snapshot.forEach(p => {
        const d = p.val();
        paymentsDiv.innerHTML += `<div class="entry">${d.method}: ${d.amount} جنيه من ${d.number}</div>`;
      });
    });

    db.ref("users").on("value", snapshot => {
      const newUsersDiv = document.getElementById("newUsers");
      newUsersDiv.innerHTML = "";
      snapshot.forEach(user => {
        const u = user.val();
        newUsersDiv.innerHTML += `<div class="entry">${u.email} | UID: ${user.key}</div>`;
      });
    });
  }

  loadData();
</script></body>
</html>
