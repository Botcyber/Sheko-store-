<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>إدارة أعضاء VIBE Studio</title>

<style>

body{
  background:#08090d;
  color:white;
  font-family:'Cairo',sans-serif;
  text-align:center;
}

h2{
  margin-top:15px;
}

.form{
  background:#0f1118;
  padding:15px;
  width:92%;
  max-width:750px;
  margin:15px auto;
  border-radius:16px;
  box-shadow:0 0 15px rgba(0,0,0,.5);
}

input,select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:10px;
  border:0;
}

button{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:0;
  cursor:pointer;
  font-weight:bold;
}

.add{background:#16c784}
.update{background:#3399ff}
.delete{background:#ff3b3b}

.member-item{
  background:#0f1118;
  margin:10px auto;
  padding:10px;
  width:92%;
  max-width:750px;
  border-radius:12px;
}

</style>
</head>

<body>

<h2>لوحة إدارة الأعضاء</h2>

<div class="form">

  <label>صورة العضو</label>
  <input type="file" id="image">

  <label>اسم العضو</label>
  <input type="text" id="name">

  <label>المهنة</label>
  <select id="role">

<option>المغني</option>
<option>المؤدي الصوتي</option>
<option>الرابر</option>
<option>الكورال</option>
<option>الملحن</option>
<option>كاتب الكلمات</option>
<option>الموزع الموسيقي</option>
<option>DJ</option>
<option>Live Performer</option>
<option>عازف بيانو</option>
<option>عازف أورج</option>
<option>عازف جيتار</option>
<option>عازف كمان</option>
<option>عازف درامز</option>
<option>عازف ناي</option>
<option>عازف عود</option>
<option>عازف قانون</option>
<option>مهندس صوت</option>
<option>ميكس وماستر</option>
<option>مصور</option>
<option>مخرج فني</option>
<option>سوشيال ميديا</option>

  </select>

  <label>حقل إضافي بجانب المهنة (اختياري)</label>
  <input type="text" id="extra" placeholder="مثال: محترف – دولي – لايف">

  <label>
    <input type="checkbox" id="featuredCheck">
    ⭐ عضو مميز
  </label>

  <button class="add" onclick="addMember()">إضافة عضو</button>

</div>

<div id="members"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyAYcZ2_RjaI4fjP14QlqbUbL3rWvPPWnas",
  authDomain: "sheko-store.firebaseapp.com",
  databaseURL: "https://sheko-store-default-rtdb.firebaseio.com",
  projectId: "sheko-store",
  storageBucket: "sheko-store.appspot.com",
  messagingSenderId: "113892775847",
  appId: "1:113892775847:web:2aa4c11c3f5dd1d15f0882"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let editKey = null;

function getFile(file){
  return new Promise(res=>{
    let r = new FileReader();
    r.onload =()=>res(r.result);
    r.readAsDataURL(file);
  });
}

async function addMember(){

  let name = nameInput.value;
  let role = roleInput.value;
  let extra = extraInput.value;
  let featured = featuredCheck.checked;
  let file = image.files[0];

  if(!name || !file){
    alert("اكتب الاسم وارفع صورة");
    return;
  }

  let img = await getFile(file);

  let key = db.ref().child("vibeMembers").push().key;

  db.ref("vibeMembers/"+key).set({
    key,
    name,
    role: extra ? role+" - "+extra : role,
    featured,
    image: img,
    time: Date.now()
  });

  alert("تمت إضافة العضو ✔️");
}

let nameInput = document.getElementById("name");
let roleInput = document.getElementById("role");
let extraInput = document.getElementById("extra");

db.ref("vibeMembers").on("value",snap=>{

  let box = document.getElementById("members");
  box.innerHTML = "";

  let arr=[];
  snap.forEach(c=>arr.push(c.val()));
  arr.reverse();

  arr.forEach(m=>{
    box.innerHTML += `
      <div class="member-item">
        <b>${m.name}</b><br>
