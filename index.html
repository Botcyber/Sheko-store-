<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAYcZ2_RjaI4fjP14QlqbUbL3rWvPPWnas",
    authDomain: "sheko-store.firebaseapp.com",
    databaseURL: "https://sheko-store-default-rtdb.firebaseio.com",
    projectId: "sheko-store",
    storageBucket: "sheko-store.appspot.com",
    messagingSenderId: "113892775847",
    appId: "1:113892775847:web:2aa4c11c3f5dd1d15f0882"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getDatabase(app);

  // عند الضغط على زر التسجيل
  document.getElementById("registerBtn").addEventListener("click", () => {
    const email = document.getElementById("emailInput").value;
    const password = document.getElementById("passwordInput").value;

    createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        // إضافة المستخدم إلى قاعدة البيانات
        set(ref(db, "users/" + user.uid), {
          email: user.email,
          balance: 0,
          points: 0
        });

        alert("✅ تم إنشاء الحساب وتسجيله في قاعدة البيانات بنجاح!");
        // يمكنك إعادة التوجيه بعد التسجيل
        window.location.href = "dashboard.html";
      })
      .catch((error) => {
        alert("❌ حدث خطأ: " + error.message);
      });
  });
</script>
