<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>لوحة الإدارة</title>
<style>
body { font-family: sans-serif; background:#111; color:white; text-align:center; padding:20px; }
input, select, button { width:90%; padding:10px; margin:5px 0; border-radius:10px; border:none; }
button { cursor:pointer; background:#0f6; color:#000; }
button.delete { background:#f33; color:white; }
.link-item { background:#1a1a1a; padding:10px; margin:10px auto; border-radius:10px; text-align:right; }
.actions button { margin-left:5px; }
</style>
</head>
<body>

<h2>لوحة الإدارة</h2>

<h3>إضافة رابط جديد</h3>
<select id="iconSelect">
    <option value="facebook">Facebook</option>
    <option value="instagram">Instagram</option>
    <option value="youtube">YouTube</option>
    <option value="tiktok">TikTok</option>
    <option value="twitter">Twitter</option>
    <option value="snapchat">Snapchat</option>
</select>
<input id="nameInput" placeholder="اسم الرابط">
<input id="urlInput" placeholder="الرابط">
<button onclick="addLink()">إضافة</button>

<hr>

<h3>الروابط الحالية</h3>
<div id="linksList"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
// Firebase
const firebaseConfig = {
    apiKey: "AIzaSyAYcZ2_RjaI4fjP14QlqbUbL3rWvPPWnas",
    authDomain: "sheko-store.firebaseapp.com",
    databaseURL: "https://sheko-store-default-rtdb.firebaseio.com",
    projectId: "sheko-store",
    storageBucket: "sheko-store.appspot.com",
    messagingSenderId: "113892775847",
    appId: "1:113892775847:web:2aa4c11c3f5dd1d15f0882"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// خريطة الأيقونات كصور SVG صغيرة
const iconMap = {
    facebook: '<img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" width="30">',
    instagram: '<img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" width="30">',
    youtube: '<img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg" width="30">',
    tiktok: '<img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg" width="30">',
    twitter: '<img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/twitter.svg" width="30">',
    snapchat: '<img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/snapchat.svg" width="30">'
};

// إضافة رابط جديد
function addLink(){
    let type = document.getElementById("iconSelect").value;
    let name = document.getElementById("nameInput").value.trim();
    let url  = document.getElementById("urlInput").value.trim();
    if(!name || !url) return alert("أكمل البيانات!");

    let icon = iconMap[type];
    let id = db.ref("mainPage/links").push().key;
    db.ref("mainPage/links/" + id).set({ icon, name, url });

    document.getElementById("nameInput").value = "";
    document.getElementById("urlInput").value = "";
}

// عرض الروابط الحالية مع تعديل وحذف
db.ref("mainPage/links").on("value", snap => {
    let html = "";
    snap.forEach(child => {
        let id = child.key;
        let data = child.val();
        html += `
        <div class="link-item">
            ${data.icon} <b>${data.name}</b> — ${data.url}<br>
            <div class="actions">
                <button onclick="editLink('${id}', '${data.name}', '${data.url}')">تعديل</button>
                <button class="delete" onclick="deleteLink('${id}')">حذف</button>
            </div>
        </div>`;
    });
    document.getElementById("linksList").innerHTML = html;
});

function editLink(id, oldName, oldUrl){
    let newName = prompt("اسم جديد:", oldName);
    if(!newName) return;
    let newUrl  = prompt("رابط جديد:", oldUrl);
    if(!newUrl) return;
    db.ref("mainPage/links/" + id).update({ name:newName, url:newUrl });
}

function deleteLink(id){
    if(confirm("هل تريد الحذف؟")){
        db.ref("mainPage/links/" + id).remove();
    }
}
</script>
</body>
</html>
