<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</title>
<style>
    body { font-family:sans-serif; background:#111; color:white; text-align:center; }
    input, select { width:90%; padding:10px; margin:7px 0; border-radius:10px; border:none; }
    button { background:#0f6; border:none; padding:10px 20px; margin-top:10px; border-radius:10px; cursor:pointer; }
    .link-item { background:#1a1a1a; padding:15px; border-radius:10px; margin:8px; text-align:right; }
    .actions button { margin-left:5px; }
</style>
</head>
<body>

<h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>

<h3>Ø±ÙØ¹ ØµÙˆØ±Ø©</h3>
<input type="file" id="imgInput">
<button onclick="uploadImage()">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</button>

<hr>

<h3>Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø·</h3>
<select id="iconSelect">
    <option value="ğŸŒ">Ù…ÙˆÙ‚Ø¹</option>
    <option value="ğŸ“¸">Instagram</option>
    <option value="ğŸµ">TikTok</option>
    <option value="ğŸ“˜">Facebook</option>
    <option value="â–¶ï¸">YouTube</option>
    <option value="ğŸ’¬">WhatsApp</option>
    <option value="ğŸ¦">Twitter</option>
</select>

<input id="nameInput" placeholder="Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø·">
<input id="urlInput" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø·">
<button onclick="addLink()">Ø¥Ø¶Ø§ÙØ©</button>

<hr>

<h3>Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø¶Ø§ÙØ©</h3>
<div id="linksList"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
// Firebase
const firebaseConfig = {
    apiKey: "",
    authDomain: "",
    databaseURL: "",
    projectId: "",
    storageBucket: "",
    messagingSenderId: "",
    appId: ""
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Base64
function uploadImage() {
    let file = document.getElementById("imgInput").files[0];
    if (!file) return alert("Ø§Ø®ØªØ± ØµÙˆØ±Ø©");

    let reader = new FileReader();
    reader.onload = function(e) {
        db.ref("profile/image").set(e.target.result);
        alert("ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©");
    }
    reader.readAsDataURL(file);
}

// Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø·
function addLink() {
    let icon = document.getElementById("iconSelect").value;
    let name = document.getElementById("nameInput").value;
    let url  = document.getElementById("urlInput").value;

    if (!name || !url) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

    let id = db.ref("profile/links").push().key;
    db.ref("profile/links/" + id).set({ icon, name, url });

    document.getElementById("nameInput").value = "";
    document.getElementById("urlInput").value = "";
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· + ØªØ¹Ø¯ÙŠÙ„ + Ø­Ø°Ù
db.ref("profile/links").on("value", snap => {
    let html = "";
    snap.forEach(child => {
        let id = child.key;
        let data = child.val();

        html += `
        <div class="link-item">
            <b>${data.name}</b> â€” ${data.url}<br>
            <div class="actions">
                <button onclick="editLink('${id}', '${data.name}', '${data.url}', '${data.icon}')">ØªØ¹Ø¯ÙŠÙ„</button>
                <button onclick="deleteLink('${id}')" style="background:#f33">Ø­Ø°Ù</button>
            </div>
        </div>
        `;
    });
    document.getElementById("linksList").innerHTML = html;
});

// ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·
function editLink(id, oldName, oldUrl, oldIcon) {
    let newName = prompt("Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯:", oldName);
    if (!newName) return;

    let newUrl  = prompt("Ø±Ø§Ø¨Ø· Ø¬Ø¯ÙŠØ¯:", oldUrl);
    if (!newUrl) return;

    db.ref("profile/links/" + id).update({
        name: newName,
        url: newUrl
    });
}

// Ø­Ø°Ù Ø§Ù„Ø±Ø§Ø¨Ø·
function deleteLink(id) {
    if (confirm("Ù…ØªØ£ÙƒØ¯ØŸ")) {
        db.ref("profile/links/" + id).remove();
    }
}
</script>

</body>
</html>
